<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A4 পেপার টেক্সট এডিটর</title>

    <!-- PDF জেনারেট করার জন্য প্রয়োজনীয় লাইব্রেরি (CDN থেকে লোড হবে) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <style>
        /* --- CSS কোড শুরু --- */

        /* বেসিক স্টাইলিং */
        body {
            background-color: #f0f0f0; /* পেজের الخلفية রঙ */
            font-family: 'SolaimanLipi', Arial, sans-serif; /* বাংলা ফন্টের জন্য */
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 20px;
        }

        /* কন্ট্রোল বাটনগুলোর কন্টেইনার */
        .controls {
            display: flex;
            align-items: center;
            gap: 15px; /* বাটনগুলোর মধ্যে ফাঁকা জায়গা */
            margin-bottom: 20px;
            background-color: white;
            padding: 10px 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        /* বাটন স্টাইল */
        .btn {
            padding: 10px 15px;
            font-size: 16px;
            cursor: pointer;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #e9e9e9;
            transition: background-color 0.3s;
        }

        .btn:hover {
            background-color: #dcdcdc;
        }

        /* কালার পিকারের স্টাইল */
        #colorPicker {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            width: 40px;
            height: 40px;
            background-color: transparent;
            border: none;
            cursor: pointer;
        }
        #colorPicker::-webkit-color-swatch {
            border-radius: 50%;
            border: 2px solid #ccc;
        }
        #colorPicker::-moz-color-swatch {
            border-radius: 50%;
            border: 2px solid #ccc;
        }


        /* A4 পেপারের মতো দেখতে div */
        #a4-paper {
            background: white;
            width: 21cm; /* A4 কাগজের প্রস্থ */
            height: 29.7cm; /* A4 কাগজের উচ্চতা */
            padding: 2cm; /* কাগজের মার্জিন */
            border: 1px solid #d3d3d3;
            box-shadow: 0 0 10px rgba(0,0,0,0.15);
            box-sizing: border-box; /* প্যাডিং যেন মূল width/height এর বাইরে না যায় */
            overflow-y: auto; /* লেখা বেশি হলে স্ক্রল করার সুবিধা */
        }

        /* লেখার মূল জায়গা */
        #editor {
            width: 100%;
            height: 100%;
            outline: none; /* লেখার সময় বর্ডার দেখাবে না */
            font-size: 12pt;
            line-height: 1.5;
        }

        /* প্রিন্ট করার সময় শুধু A4 পেপারটিই দেখা যাবে */
        @media print {
            body * {
                visibility: hidden; /* সব কিছু লুকিয়ে ফেলবে */
            }
            #a4-paper, #a4-paper * {
                visibility: visible; /* শুধু পেপার এবং তার ভেতরের লেখা দেখাবে */
            }
            #a4-paper {
                position: absolute;
                left: 0;
                top: 0;
                margin: 0;
                border: none;
                box-shadow: none;
                padding: 1.5cm; /* প্রিন্টের জন্য মার্জিন */
            }
            .controls {
                display: none; /* কন্ট্রোল বাটনগুলো প্রিন্টে দেখাবে না */
            }
        }
        /* --- CSS কোড শেষ --- */
    </style>
</head>
<body>

    <!-- টুলের অপশনগুলো এখানে থাকবে -->
    <div class="controls">
        <label for="colorPicker">লেখার কালার:</label>
        <input type="color" id="colorPicker" title="লেখার রঙ পরিবর্তন করুন">
        
        <button id="downloadBtn" class="btn">PDF ডাউনলোড করুন</button>
        <button id="printBtn" class="btn">প্রিন্ট করুন</button>
    </div>

    <!-- এটি হলো আমাদের A4 সাইজের পেপার -->
    <div id="a4-paper">
        <!-- contenteditable="true" অ্যাট্রিবিউটের কারণে এই div এর ভেতরে লেখা যায় -->
        <div id="editor" contenteditable="true">
            এখানে আপনার লেখা শুরু করুন...
        </div>
    </div>

    <script>
        // --- JavaScript কোড শুরু ---

        // HTML এলিমেন্টগুলোকে ভ্যারিয়েবলে নেওয়া হচ্ছে
        const editor = document.getElementById('editor');
        const colorPicker = document.getElementById('colorPicker');
        const downloadBtn = document.getElementById('downloadBtn');
        const printBtn = document.getElementById('printBtn');

        // কালার পিকারের রঙ পরিবর্তন হলে টেক্সটের রঙ পরিবর্তন হবে
        colorPicker.addEventListener('input', (event) => {
            const selectedColor = event.target.value;
            // execCommand ব্যবহার করে সিলেক্ট করা টেক্সটের রঙ পরিবর্তন করা হয়
            document.execCommand('foreColor', false, selectedColor);
        });

        // প্রিন্ট বাটনে ক্লিক করলে প্রিন্ট ডায়ালগ খুলবে
        printBtn.addEventListener('click', () => {
            window.print(); // ব্রাউজারের ডিফল্ট প্রিন্ট ফাংশন কল করা হলো
        });

        // PDF ডাউনলোড বাটনে ক্লিক করলে যা হবে
        downloadBtn.addEventListener('click', () => {
            // jsPDF লাইব্রেরি ব্যবহারের জন্য window.jspdf থেকে jspdf অবজেক্ট নেওয়া হলো
            const { jsPDF } = window.jspdf;
            
            const paperElement = document.getElementById('a4-paper');
            
            alert("PDF তৈরি হচ্ছে। ফাইল বড় হলে কয়েক সেকেন্ড সময় লাগতে পারে।");

            // html2canvas ব্যবহার করে A4 পেপার div-টির একটি ছবি (canvas) তৈরি করা হচ্ছে
            html2canvas(paperElement, {
                scale: 2, // রেজোলিউশন বাড়ানোর জন্য scale বাড়ানো হলো
                useCORS: true // যদি কোনো বাইরের ছবি ব্যবহার করা হয় তার জন্য
            }).then(canvas => {
                // canvas থেকে ছবির ডেটা URL পাওয়া গেলো
                const imgData = canvas.toDataURL('image/png');
                
                // একটি নতুন PDF ডকুমেন্ট তৈরি করা হচ্ছে (A4 সাইজ, portrait মোড, মিলিমিটারে হিসাব)
                const pdf = new jsPDF('p', 'mm', 'a4');
                
                const pdfWidth = pdf.internal.pageSize.getWidth();
                const pdfHeight = pdf.internal.pageSize.getHeight();
                
                // PDF ডকুমেন্টে ছবিটি যুক্ত করা হচ্ছে
                pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);
                
                // PDF ফাইলটি সেভ করা হচ্ছে
                pdf.save("document.pdf");
            });
        });

        // --- JavaScript কোড শেষ ---
    </script>

</body>
</html>